<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unshakable Facts Handbook</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React & ReactDOM (Development versions for better error messages) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 3. Babel (To translate JSX in the browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 h-screen overflow-hidden">
    
    <!-- The Root Element where React will render -->
    <div id="root" class="h-full"></div>

    <!-- The React Application Logic -->
    <script type="text/babel">
        const { useState } = React;

        // --- ICONS (Inline SVGs to remove external dependencies) ---
        const IconWrapper = ({ children, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </IconWrapper>
        );

        const ShieldAlert = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                <line x1="12" y1="8" x2="12" y2="12" />
                <line x1="12" y1="16" x2="12.01" y2="16" />
            </IconWrapper>
        );

        const MessageSquare = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
            </IconWrapper>
        );

        const FileText = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10 9 9 9 8 9" />
            </IconWrapper>
        );

        const Users = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </IconWrapper>
        );

        const ChevronRight = ({ className }) => (
            <IconWrapper className={className}>
                <polyline points="9 18 15 12 9 6" />
            </IconWrapper>
        );

        const Menu = ({ className }) => (
            <IconWrapper className={className}>
                <line x1="3" y1="12" x2="21" y2="12" />
                <line x1="3" y1="6" x2="21" y2="6" />
                <line x1="3" y1="18" x2="21" y2="18" />
            </IconWrapper>
        );

        const X = ({ className }) => (
            <IconWrapper className={className}>
                <line x1="18" y1="6" x2="6" y2="18" />
                <line x1="6" y1="6" x2="18" y2="18" />
            </IconWrapper>
        );

        const CheckCircle = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
            </IconWrapper>
        );

        const Clock = ({ className }) => (
            <IconWrapper className={className}>
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
            </IconWrapper>
        );

        const AlertTriangle = ({ className }) => (
            <IconWrapper className={className}>
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                <line x1="12" y1="9" x2="12" y2="13" />
                <line x1="12" y1="17" x2="12.01" y2="17" />
            </IconWrapper>
        );

        const Copy = ({ className }) => (
            <IconWrapper className={className}>
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
            </IconWrapper>
        );
        
        const TrendingUp = ({ className }) => (
            <IconWrapper className={className}>
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                <polyline points="17 6 23 6 23 12" />
            </IconWrapper>
        );

        // --- DATA STRUCTURE ---
        const modules = [
            {
                id: 'overview',
                title: 'Program Overview',
                icon: <BookOpen className="w-5 h-5" />,
                content: {
                    title: 'Unshakable Facts: Ownership Under Pressure',
                    subtitle: 'Because doing the right thing isn’t just our culture — it’s our promise.',
                    sections: [
                        {
                            title: 'Program Purpose',
                            body: 'When situations get uncomfortable—comebacks, safety concerns, customer frustration, internal mistakes—our job is not to hide, guess, blame, or delay. Our job is to lead with facts, ownership, and clear next actions so we protect the customer, protect the team, and protect the business.'
                        },
                        {
                            title: 'The 6 Problems We Solve',
                            list: [
                                'Deflection / Blame Loops ("That wasn’t us" / "Sales didn\'t check")',
                                'Silence / Avoidance of hard conversations',
                                '"All I got was a bill" communication failures',
                                'Weak documentation (If it’s not written, it’s luck)',
                                'Leaders who don’t confront issues early',
                                'Customer trust damage from inconsistent messaging'
                            ]
                        },
                        {
                            title: 'Core Definitions',
                            definitions: [
                                { term: 'Unshakable Facts', def: 'Verifiable truth + documented evidence + clear next action. Not what we assume or feel.' },
                                { term: 'Ownership', def: 'Taking responsibility for verification, communication, and outcome—regardless of fault.' },
                                { term: 'Deflection', def: 'Any response that pushes responsibility away before verification (e.g., "Sales did it").' },
                                { term: 'Verification', def: 'Turning a story into truth via inspection, measurement, photos, and scans.' },
                                { term: 'Communication Cadence', def: '2-2-2 Updates: 2 Facts, 2 Actions, 2 Times (ETA + Next Update).' }
                            ]
                        }
                    ]
                }
            },
            {
                id: 'growth-pillars',
                title: 'Core Growth Pillars',
                icon: <TrendingUp className="w-5 h-5" />,
                content: {
                    title: 'Strategic Growth & Process Design',
                    subtitle: 'Moving from reactive firefighting to proactive firewalls across Sales, Service, and Parts.',
                    pillars: [
                        {
                            title: 'From "Blame Loops" to "Fact Loops"',
                            old: '"Service missed it," or "Sales promised it."',
                            growth: 'Replacing emotional defense with UF5 (Fact, Impact, Ownership, Plan, Proof). Stop treating mistakes as threats to reputation; treat them as data for improvement.'
                        },
                        {
                            title: 'From "Silence" to "Cadence"',
                            old: 'Avoiding the phone when there is no news or bad news.',
                            growth: 'Mastering the 2–2–2 Standard. Understanding that "no news" is still an update if it includes a next update time.'
                        },
                        {
                            title: 'From "Luck" to "Verification"',
                            old: 'Releasing a vehicle because the tech "thinks it\'s good" or Sales delivering a car "hoping the We-Owe was done."',
                            growth: 'Installing Verification Gates. Never releasing a vehicle (Service) or delivering a car (Sales) without physical proof that the promise was kept.'
                        }
                    ],
                    processDesign: {
                        title: 'Process Design: Building Firewalls',
                        description: 'Moving from managers who "put out fires" to managers who "build firewalls."',
                        tool: 'The Prevent-Repeat System',
                        goal: 'Every process failure must trigger a Root Cause Analysis and a new Verification Gate, ensuring we never pay for the same mistake twice.'
                    }
                }
            },
            {
                id: 'core-framework',
                title: 'The Core Framework (UF5)',
                icon: <CheckCircle className="w-5 h-5" />,
                content: {
                    title: 'The UF5 Structure',
                    subtitle: 'What we do every time pressure hits.',
                    steps: [
                        { step: 1, name: 'Fact', desc: 'What do we know happened? (Dates, symptoms, photos, measurements)' },
                        { step: 2, name: 'Impact', desc: 'Why it matters. (Safety, Trust, Time, Cost)' },
                        { step: 3, name: 'Ownership', desc: 'What do we own right now? (Verification, Communication, Outcome)' },
                        { step: 4, name: 'Plan', desc: 'Who is doing what, by when—plus the next update time.' },
                        { step: 5, name: 'Proof', desc: 'How we confirm and document resolution (Photos, Logs, QC Sign-off).' }
                    ],
                    extraContent: {
                        title: 'The 60-Second Stabilizer',
                        desc: 'Use this immediately when emotions are high.',
                        script: '"I hear you. I’m going to own this with you. Here’s what we know right now... Here’s what we’re doing next... Next update will be at ___."'
                    }
                }
            },
            {
                id: 'safety',
                title: 'Safety Protocols',
                icon: <ShieldAlert className="w-5 h-5" />,
                content: {
                    title: 'Non-Negotiable Safety Response',
                    alert: 'If a customer mentions "unsafe", "scared", "wheel almost came off", or "brakes failed", this protocol activates immediately.',
                    triggers: [
                        'Brakes (noise, pull, soft pedal)',
                        'Steering/suspension vibration or looseness',
                        'ABS/Airbag warning lights',
                                                'Wheels/tires/lug nuts/studs',
                        'Fuel smell/smoke/overheating'
                    ],
                    protocol: [
                        'Manager notified same hour.',
                        'Customer contacted same hour.',
                        'Written recap created immediately.',
                                                'Manager notified same hour.',

                        'Proof Before Release: Vehicle is NOT released until verification is documented and signed off.'
                    ],
                    script: '"We will treat this as a safety priority. We will verify and document everything before release. We will not release the vehicle until we can prove it is safe."'
                }
            },
            {
                id: 'scripts',
                title: 'Scripts & Handoffs',
                icon: <MessageSquare className="w-5 h-5" />,
                content: {
                    title: 'Critical Conversations',
                    subtitle: 'Word-for-word scripts to stop deflection and build trust.',
                    scripts: [
                        {
                            situation: 'Customer asks: "Whose fault is this?"',
                            say: '"Right now our priority is fixing this correctly and safely. I’m not going to guess or point fingers. Once we verify the facts and document what we find, I’ll explain exactly what happened and the plan to prevent a repeat."'
                        },
                        {
                            situation: 'Customer asks: "Are you going to cover this?" (No Accidental Promises)',
                            say: '"First, we’re going to verify exactly what’s going on and document it. Then we’ll review options and any coverage available. I’ll have a clear answer for you after verification. Next update is at ___."'
                        },
                        {
                            situation: 'Sales: Customer returns shouting "You sold me a lemon!"',
                            say: '"I hear you, and I’m sorry you’re dealing with this. I’m going to own this with you. I’m not going to guess or defend. I’m going to grab our Service Manager right now so we can verify the facts and get a plan. I will stay with you until we have that plan."'
                        },
                        {
                            situation: 'Internal Handoff (Stop the Blame Loop)',
                            say: '"Here is what we know and what is documented. Here is what we are verifying. Here is the plan and the next update time. We can discuss contributing factors after verification."'
                        },
                        {
                            situation: 'Manager Coaching Defensive Employee',
                            say: '"I’m not here to blame you. I’m here to fix the situation. Walk me through what happened using facts only. What is documented? What is the plan?"'
                        }
                    ]
                }
            },
            {
                id: 'templates',
                title: 'Templates & Docs',
                icon: <FileText className="w-5 h-5" />,
                content: {
                    title: 'Copy-Paste Documentation',
                    subtitle: 'If it isn’t documented, it didn’t happen.',
                    templates: [
                        {
                            name: 'The 2-2-2 Update (Cadence)',
                            text: `Update to customer at: [Time]\n\n2 Facts:\n1) [Fact 1]\n2) [Fact 2]\n\n2 Actions:\n1) [Action 1]\n2) [Action 2]\n\n2 Times:\nETA: [Time]\nNext Update: [Time]`
                        },
                        {
                            name: 'UF Huddle Recap (Internal)',
                            text: `Subject: UF Huddle - [Customer/Unit]\n\nFACTS (Verified): [Details]\nUNKNOWNs: [What needs verification]\n\nIMPACT: Safety Y/N | Trust H/M/L\nOWNERSHIP: [Single Point Owner]\n\nPLAN:\n[Action 1] (Owner/ETA)\n[Action 2] (Owner/ETA)\n\nTIMING:\nNext Customer Update: [Time]\nNext Internal Update: [Time]\n\nPROOF REQUIRED: [Photos/Logs/Sign-off]`
                        },
                        {
                            name: 'Safety Verification Log',
                            text: `Customer Statement: "[Quote]"\nSafety Category: [Wheels/Brakes/Steering/Other]\n\nVerification Performed:\n[List Steps]\n\nEvidence Captured:\n[Photos/Measurements/Torque Specs]\n\nResult: [Pass/Fail]\nProof Required Before Release: [Detail]\n\nTech Sign-off: [Name/Time]\nManager Sign-off: [Name/Time]`
                        }
                    ]
                }
            },
            {
                id: 'management',
                title: 'Management Track',
                icon: <Users className="w-5 h-5" />,
                content: {
                    title: 'Accountability & Coaching',
                    sections: [
                        {
                            title: 'Leading the Culture Shift',
                            cultureShift: [
                                {
                                    title: "1. The Manager's Role: Lowering the Shield",
                                    content: "For the team to speak up, they must see you care more about the Gate than the Reprimand.",
                                    points: [
                                        { label: 'The "Safety" Standard', text: 'When a mistake is admitted, say: "Thank you for the facts. Let’s look at the gate that allowed this."' },
                                        { label: 'The Mirror', text: 'If leaders blame Sales or Parts, staff will too. Trust starts when Managers use Ownership language first.' }
                                    ]
                                },
                                {
                                    title: "2. Psychological Safety vs. Accountability",
                                    content: "Trust doesn't mean 'no consequences'—it means predictable consequences.",
                                    comparison: [
                                        { state: "When the team feels Blamed/Shamed", behavior: "They hide facts, lie in notes, and deflect to other departments." },
                                        { state: "When the team feels Coached (CALM)", behavior: "They provide unshakable facts, help build the gate, and own the outcome." }
                                    ]
                                },
                                {
                                    title: "3. Turning Failures into Tuition",
                                    content: "You have to treat process failures like tuition you've already paid.",
                                    highlight: "If a comeback costs $1,000, or a missed 'We Owe' costs Sales $500, that is tuition. If you just yell, you wasted the money. If you build a Verification Gate (mandatory torque log or signed We-Owe checklist), you’ve 'bought' a permanent improvement."
                                },
                                {
                                    title: "4. The 'No-Penalty' Fact-Finding",
                                    content: "In UF Huddles, enforce the rule: Facts are neutral.",
                                    text: "A fact isn't 'bad' or 'good'—it just is. When the team realizes that bringing a 'bad' fact to the table results in a Plan instead of a Lecture, they will start opening up."
                                }
                            ]
                        },
                        {
                            title: 'The Prevent-Repeat Loop',
                            text: 'One comeback is an event. Two is a process problem. We do not punish people; we fix processes.',
                            visualLoop: [
                                { step: 1, label: "Root Cause", sub: "Skill, Behavior, or Process?" },
                                { step: 2, label: "Name the Gate", sub: "What check failed?" },
                                { step: 3, label: "Process Change", sub: "New form, log, or sign-off" },
                                { step: 4, label: "Audit Proof", sub: "Verify the fix works" }
                            ]
                        },
                        {
                            title: 'The Accountability Questions',
                            list: [
                                'What is documented as fact?',
                                'What was verified, and how?',
                                'What should have caught this earlier?',
                                'What is the corrective action—and who owns it?',
                                'How will we prove the corrective action is working?'
                            ]
                        },
                        {
                            title: 'The 30-Second RESET (Emotional Control)',
                            steps: [
                                'R: Reset body (feet down, shoulders down)',
                                'E: Exhale long twice',
                                'S: Say standard ("Facts, ownership, next action")',
                                'E: Engage curiosity ("What do I know?")',
                                'T: Take lead ("We’ll verify and set next steps")'
                            ]
                        }
                    ]
                }
            }
        ];

        // --- COMPONENTS ---

        const ScriptBox = ({ title, text }) => (
            <div className="bg-blue-50 border-l-4 border-blue-600 p-4 mb-4 rounded-r-lg shadow-sm">
                <h4 className="font-bold text-blue-900 text-sm mb-2 uppercase tracking-wide">{title}</h4>
                <p className="font-medium text-gray-800 italic leading-relaxed">"{text}"</p>
            </div>
        );

        const TemplateBox = ({ title, text }) => {
            const [copied, setCopied] = useState(false);

            const handleCopy = () => {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <div className="bg-gray-900 text-gray-100 p-4 rounded-lg mb-6 shadow-lg relative group">
                    <div className="flex justify-between items-center mb-3 border-b border-gray-700 pb-2">
                        <h4 className="font-mono text-sm text-blue-400 font-bold">{title}</h4>
                        <button 
                            onClick={handleCopy}
                            className="flex items-center space-x-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded transition-colors"
                        >
                            {copied ? <CheckCircle className="w-3 h-3 text-green-400" /> : <Copy className="w-3 h-3" />}
                            <span>{copied ? 'Copied' : 'Copy'}</span>
                        </button>
                    </div>
                    <pre className="font-mono text-sm whitespace-pre-wrap text-gray-300 leading-relaxed">{text}</pre>
                </div>
            );
        };

        const UnshakableApp = () => {
            const [activeModuleId, setActiveModuleId] = useState('overview');
            const [sidebarOpen, setSidebarOpen] = useState(false);

            const activeContent = modules.find(m => m.id === activeModuleId);
            const toggleSidebar = () => setSidebarOpen(!sidebarOpen);

            return (
                <div className="flex h-screen bg-gray-50 text-slate-800 font-sans overflow-hidden">
                    {/* Mobile Overlay */}
                    {sidebarOpen && (
                        <div 
                            className="fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"
                            onClick={() => setSidebarOpen(false)}
                        />
                    )}

                    {/* Sidebar Navigation */}
                    <aside className={`
                        fixed lg:static inset-y-0 left-0 z-30 w-72 bg-slate-900 text-white transform transition-transform duration-200 ease-in-out shadow-2xl h-full flex flex-col
                        ${sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}
                    `}>
                        <div className="p-6 border-b border-slate-800 flex justify-between items-center shrink-0">
                            <div>
                                <h1 className="text-xl font-bold tracking-tight text-white">UNSHAKABLE</h1>
                                <p className="text-xs text-blue-400 uppercase tracking-widest mt-1">Ownership Handbook</p>
                            </div>
                            <button onClick={toggleSidebar} className="lg:hidden text-gray-400 hover:text-white">
                                <X className="w-6 h-6" />
                            </button>
                        </div>
                        
                        <nav className="p-4 space-y-1 overflow-y-auto flex-1">
                            {modules.map((module) => (
                                <button
                                    key={module.id}
                                    onClick={() => {
                                        setActiveModuleId(module.id);
                                        setSidebarOpen(false);
                                    }}
                                    className={`
                                        w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 group
                                        ${activeModuleId === module.id 
                                            ? 'bg-blue-600 text-white shadow-md' 
                                            : 'text-slate-400 hover:bg-slate-800 hover:text-white'}
                                    `}
                                >
                                    <div className={`${activeModuleId === module.id ? 'text-white' : 'text-slate-500 group-hover:text-white'}`}>
                                        {module.icon}
                                    </div>
                                    <span className="font-medium text-sm text-left">{module.title}</span>
                                    {activeModuleId === module.id && <ChevronRight className="w-4 h-4 ml-auto" />}
                                </button>
                            ))}
                            
                            <div className="mt-8 px-4 pb-4">
                                <div className="bg-slate-800 rounded-lg p-4 text-xs text-slate-400">
                                    <p className="font-bold text-white mb-2">The One-Sentence Standard:</p>
                                    "Facts first. Ownership always. Next update time. Proof before release."
                                </div>
                            </div>
                        </nav>
                    </aside>

                    {/* Main Content Area */}
                    <main className="flex-1 flex flex-col h-full overflow-hidden w-full relative bg-gray-50">
                        {/* Mobile Header */}
                        <header className="lg:hidden bg-white border-b border-gray-200 p-4 flex items-center shadow-sm z-10 shrink-0">
                            <button onClick={toggleSidebar} className="text-slate-600 hover:text-slate-900 mr-4">
                                <Menu className="w-6 h-6" />
                            </button>
                            <span className="font-bold text-slate-800 truncate">{activeContent.title}</span>
                        </header>

                        {/* Content Scroll Area */}
                        <div className="flex-1 overflow-y-auto p-6 lg:p-12 scroll-smooth">
                            <div className="max-w-4xl mx-auto pb-20">
                                {/* Module Header */}
                                <div className="mb-8 border-b border-gray-200 pb-6">
                                    <div className="flex items-center space-x-2 text-blue-600 mb-2 font-bold uppercase text-xs tracking-wider">
                                        {activeContent.icon}
                                        <span>Module Content</span>
                                    </div>
                                    <h2 className="text-3xl lg:text-4xl font-extrabold text-slate-900 mb-2">
                                        {activeContent.content.title}
                                    </h2>
                                    {activeContent.content.subtitle && (
                                        <p className="text-xl text-slate-500 font-light">
                                            {activeContent.content.subtitle}
                                        </p>
                                    )}
                                </div>

                                {/* Dynamic Content Rendering */}
                                {activeModuleId === 'overview' && (
                                    <div className="space-y-8">
                                        {activeContent.content.sections.map((section, idx) => (
                                            <div key={idx} className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                                <h3 className="text-xl font-bold text-slate-800 mb-4">{section.title}</h3>
                                                {section.body && <p className="text-gray-600 leading-relaxed">{section.body}</p>}
                                                {section.list && (
                                                    <ul className="space-y-3">
                                                        {section.list.map((item, i) => (
                                                            <li key={i} className="flex items-start">
                                                                <span className="bg-red-100 text-red-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-1 shrink-0">{i + 1}</span>
                                                                <span className="text-gray-700">{item}</span>
                                                            </li>
                                                        ))}
                                                    </ul>
                                                )}
                                                {section.definitions && (
                                                    <div className="grid gap-4 md:grid-cols-1">
                                                        {section.definitions.map((def, i) => (
                                                            <div key={i} className="border-l-4 border-slate-300 pl-4 py-1">
                                                                <span className="block font-bold text-slate-900">{def.term}</span>
                                                                <span className="text-gray-600 text-sm">{def.def}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {activeModuleId === 'growth-pillars' && (
                                    <div className="space-y-8">
                                        <div className="grid gap-6">
                                            {activeContent.content.pillars.map((pillar, idx) => (
                                                <div key={idx} className="bg-white rounded-xl p-6 shadow-sm border border-gray-100 transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
                                                    <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center">
                                                        <span className="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold mr-3">{idx + 1}</span>
                                                        {pillar.title}
                                                    </h3>
                                                    <div className="grid md:grid-cols-2 gap-6 relative">
                                                        <div className="bg-red-50 p-4 rounded-lg border border-red-100">
                                                            <span className="block text-xs font-bold text-red-600 uppercase tracking-wider mb-1">The Old Way</span>
                                                            <p className="text-gray-700 italic">"{pillar.old}"</p>
                                                        </div>
                                                        <div className="bg-green-50 p-4 rounded-lg border border-green-100 relative">
                                                            <div className="hidden md:block absolute top-1/2 -left-4 transform -translate-y-1/2 text-gray-300 z-10 bg-white rounded-full p-1 border">
                                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                                            </div>
                                                            <span className="block text-xs font-bold text-green-600 uppercase tracking-wider mb-1">The Growth</span>
                                                            <p className="text-gray-800 font-medium">{pillar.growth}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <div className="bg-slate-900 rounded-xl p-8 text-white shadow-xl relative overflow-hidden">
                                            <div className="absolute top-0 right-0 p-8 opacity-10">
                                                <ShieldAlert className="w-32 h-32" />
                                            </div>
                                            <h3 className="text-2xl font-bold mb-4 relative z-10">{activeContent.content.processDesign.title}</h3>
                                            <p className="text-blue-200 text-lg mb-6 relative z-10">{activeContent.content.processDesign.description}</p>
                                            
                                            <div className="grid md:grid-cols-2 gap-6 relative z-10">
                                                <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm border border-white/20">
                                                    <span className="block text-xs font-bold text-blue-400 uppercase tracking-wider mb-1">The Tool</span>
                                                    <p className="text-white font-bold text-xl">{activeContent.content.processDesign.tool}</p>
                                                </div>
                                                <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm border border-white/20">
                                                    <span className="block text-xs font-bold text-green-400 uppercase tracking-wider mb-1">The Goal</span>
                                                    <p className="text-white">{activeContent.content.processDesign.goal}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeModuleId === 'core-framework' && (
                                    <div className="space-y-8">
                                        {/* New Visualization Block for UF5 Structure */}
                                        <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8">
                                            <h3 className="text-lg font-bold text-slate-800 mb-6 text-center">The Sequence of Ownership</h3>
                                            <div className="relative flex flex-col md:flex-row justify-between items-center md:items-start">
                                                {/* Desktop Connector Line */}
                                                <div className="hidden md:block absolute top-5 left-4 right-4 h-0.5 bg-blue-100 -z-0"></div>

                                                {activeContent.content.steps.map((step, idx) => (
                                                    <div key={idx} className="flex flex-col items-center text-center relative z-10 w-full md:w-1/5 mb-6 md:mb-0 group">
                                                        <div className="w-12 h-12 rounded-full bg-white border-4 border-blue-500 text-blue-600 font-bold flex items-center justify-center text-xl shadow-sm group-hover:bg-blue-500 group-hover:text-white transition-colors duration-200">
                                                            {step.step}
                                                        </div>
                                                        <h4 className="mt-3 font-bold text-slate-800">{step.name}</h4>
                                                        <p className="text-xs text-slate-500 mt-1 px-2 leading-tight">{step.desc.split('.')[0]}</p>
                                                        
                                                        {/* Mobile Arrow */}
                                                        {idx < activeContent.content.steps.length - 1 && (
                                                            <div className="md:hidden mt-2 text-blue-200">
                                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                                            </div>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="bg-gradient-to-r from-slate-900 to-slate-800 text-white rounded-xl p-8 shadow-xl">
                                            <div className="flex items-center space-x-3 mb-4 text-blue-300">
                                                <Clock className="w-6 h-6" />
                                                <h3 className="font-bold uppercase tracking-wider">{activeContent.content.extraContent.title}</h3>
                                            </div>
                                            <p className="mb-6 text-slate-300">{activeContent.content.extraContent.desc}</p>
                                            <div className="bg-white/10 p-6 rounded-lg backdrop-blur-sm border border-white/20">
                                                <p className="text-xl font-medium italic leading-relaxed">
                                                    {activeContent.content.extraContent.script}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeModuleId === 'safety' && (
                                    <div className="space-y-6">
                                        <div className="bg-red-50 border-l-8 border-red-600 p-6 rounded-r-lg">
                                            <div className="flex items-start space-x-4">
                                                <AlertTriangle className="w-8 h-8 text-red-600 shrink-0" />
                                                <div>
                                                    <h3 className="font-bold text-red-800 text-lg mb-2">Safety Trigger Warning</h3>
                                                    <p className="text-red-700 font-medium">{activeContent.content.alert}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                                <h4 className="font-bold text-slate-800 mb-4 border-b pb-2">Triggers</h4>
                                                <ul className="space-y-2">
                                                    {activeContent.content.triggers.map((t, i) => (
                                                        <li key={i} className="flex items-center text-gray-700">
                                                            <span className="w-2 h-2 bg-red-500 rounded-full mr-3"></span>
                                                            {t}
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                                <h4 className="font-bold text-slate-800 mb-4 border-b pb-2">Immediate Protocol</h4>
                                                <ul className="space-y-3">
                                                    {activeContent.content.protocol.map((p, i) => (
                                                        <li key={i} className="flex items-start text-gray-700">
                                                            <CheckCircle className="w-5 h-5 text-green-500 mr-2 shrink-0" />
                                                            <span>{p}</span>
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </div>
                                        <h4 className="font-bold text-slate-500 mt-8 mb-4 uppercase text-xs tracking-wider">Required Safety Script</h4>
                                        <ScriptBox title="Say This Verbatim" text={activeContent.content.script} />
                                    </div>
                                )}

                                {activeModuleId === 'scripts' && (
                                    <div className="space-y-8">
                                        {activeContent.content.scripts.map((item, idx) => (
                                            <div key={idx}>
                                                <h3 className="font-bold text-slate-800 mb-2 flex items-center">
                                                    <span className="w-6 h-6 bg-slate-200 rounded-full flex items-center justify-center text-xs mr-3">{idx + 1}</span>
                                                    {item.situation}
                                                </h3>
                                                <ScriptBox title="The Script" text={item.say} />
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {activeModuleId === 'templates' && (
                                    <div className="space-y-6">
                                        <p className="text-gray-600 mb-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200 text-sm">
                                            <strong>Instruction:</strong> Copy these templates directly into your email, text, or CRM notes. Fill in the bracketed info [ ].
                                        </p>
                                        {activeContent.content.templates.map((temp, idx) => (
                                            <TemplateBox key={idx} title={temp.name} text={temp.text} />
                                        ))}
                                    </div>
                                )}

                                {activeModuleId === 'management' && (
                                    <div className="space-y-8">
                                        {activeContent.content.sections.map((section, idx) => (
                                            <div key={idx} className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                                <h3 className="text-xl font-bold text-slate-800 mb-4">{section.title}</h3>
                                                {section.text && <p className="text-gray-600">{section.text}</p>}
                                                {section.list && (
                                                    <ul className="space-y-3 mt-4">
                                                        {section.list.map((item, i) => (
                                                            <li key={i} className="flex items-start text-gray-700 font-medium">
                                                                <ChevronRight className="w-5 h-5 text-blue-500 mr-2 shrink-0" />
                                                                {item}
                                                            </li>
                                                        ))}
                                                    </ul>
                                                )}
                                                {section.steps && (
                                                    <div className="grid gap-2 mt-4">
                                                        {section.steps.map((step, i) => (
                                                            <div key={i} className="bg-slate-50 p-3 rounded text-sm text-slate-700 font-medium border-l-4 border-slate-300">
                                                                {step}
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}

                                                {/* --- CULTURE SHIFT RENDERER --- */}
                                                {section.cultureShift && (
                                                    <div className="grid gap-6 mt-4">
                                                        {section.cultureShift.map((item, i) => (
                                                            <div key={i} className="bg-slate-50 p-5 rounded-lg border border-slate-200">
                                                                <h4 className="font-bold text-slate-800 text-lg mb-2">{item.title}</h4>
                                                                <p className="text-gray-600 mb-4 text-sm">{item.content}</p>
                                                                
                                                                {item.points && (
                                                                    <div className="grid md:grid-cols-2 gap-4">
                                                                        {item.points.map((p, j) => (
                                                                            <div key={j} className="bg-white p-3 rounded shadow-sm border-l-4 border-blue-500">
                                                                                <span className="block font-bold text-slate-700 text-sm mb-1">{p.label}</span>
                                                                                <p className="text-sm text-gray-600">{p.text}</p>
                                                                            </div>
                                                                        ))}
                                                                    </div>
                                                                )}

                                                                {item.comparison && (
                                                                    <div className="grid md:grid-cols-2 gap-0 border border-gray-300 rounded-lg overflow-hidden">
                                                                        <div className="bg-red-50 p-4 border-b md:border-b-0 md:border-r border-gray-300">
                                                                            <span className="block text-xs font-bold text-red-600 uppercase mb-1">State</span>
                                                                            <p className="font-bold text-slate-800 mb-2 text-sm">{item.comparison[0].state}</p>
                                                                            <span className="block text-xs font-bold text-red-600 uppercase mb-1">Result</span>
                                                                            <p className="text-sm text-gray-700">{item.comparison[0].behavior}</p>
                                                                        </div>
                                                                        <div className="bg-green-50 p-4">
                                                                            <span className="block text-xs font-bold text-green-600 uppercase mb-1">State</span>
                                                                            <p className="font-bold text-slate-800 mb-2 text-sm">{item.comparison[1].state}</p>
                                                                            <span className="block text-xs font-bold text-green-600 uppercase mb-1">Result</span>
                                                                            <p className="text-sm text-gray-700">{item.comparison[1].behavior}</p>
                                                                        </div>
                                                                    </div>
                                                                )}

                                                                {item.highlight && (
                                                                    <div className="bg-yellow-50 p-4 rounded border border-yellow-200">
                                                                        <p className="text-slate-700 italic font-medium text-sm">"{item.highlight}"</p>
                                                                    </div>
                                                                )}
                                                                
                                                                {item.text && <p className="text-sm text-slate-600 mt-2 bg-white p-3 rounded border border-gray-100">{item.text}</p>}
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}

                                                {/* --- NEW VISUAL LOOP RENDERER --- */}
                                                {section.visualLoop && (
                                                    <div className="mt-8">
                                                        <div className="flex flex-col md:flex-row items-center justify-between relative gap-4">
                                                            {/* Connecting Line (Desktop) */}
                                                            <div className="absolute top-6 left-0 w-full h-0.5 bg-gray-200 -z-0 hidden md:block"></div>
                                                            
                                                            {section.visualLoop.map((loopItem, i) => (
                                                                <div key={i} className="relative z-10 flex flex-col items-center text-center bg-white p-2 w-full md:w-1/4">
                                                                    <div className="w-12 h-12 rounded-full bg-blue-50 border-4 border-blue-600 text-blue-800 flex items-center justify-center font-bold text-lg mb-3 shadow-sm">
                                                                        {loopItem.step}
                                                                    </div>
                                                                    <h4 className="font-bold text-slate-800 mb-1">{loopItem.label}</h4>
                                                                    <p className="text-xs text-gray-500 px-2">{loopItem.sub}</p>
                                                                    
                                                                    {/* Arrow for mobile/desktop flow if needed, generally hidden by responsive layout logic or could add icon */}
                                                                    {i < section.visualLoop.length - 1 && (
                                                                        <div className="md:hidden my-2 text-gray-300">↓</div>
                                                                    )}
                                                                </div>
                                                            ))}
                                                        </div>
                                                        <div className="mt-6 bg-blue-50 p-4 rounded text-sm text-blue-800 text-center italic border border-blue-100">
                                                            "We don't punish the person. We fix the gate."
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // Render the application
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<UnshakableApp />);

    </script>
</body>
</html>
